{"version":3,"file":"navigator-widget-factory.js","sources":["../../../src/frontend/navigator/navigator-widget-factory.ts"],"sourcesContent":["import { WidgetFactory, type ViewContainer } from '@theia/core/lib/browser';\nimport { nls } from '@theia/core/lib/common/nls';\nimport { injectable, type interfaces } from '@theia/core/shared/inversify';\nimport { createFileTreeContainer } from '@theia/filesystem/lib/browser';\nimport { EXPLORER_VIEW_CONTAINER_ID, EXPLORER_VIEW_CONTAINER_TITLE_OPTIONS, FILE_NAVIGATOR_ID, FileNavigatorModel, FileNavigatorWidget as TheiaFileNavigatorWidget, NavigatorDecoratorService, NavigatorWidgetFactory as TheiaNavigatorWidgetFactory } from '@theia/navigator/lib/browser';\n\nimport { FILE_NAVIGATOR_PROPS } from '@theia/navigator/lib/browser/navigator-container';\nimport { FileNavigatorTree } from '@theia/navigator/lib/browser/navigator-tree';\n\nexport function initFileNavigator({ bind, rebind }: { bind: interfaces.Bind; rebind: interfaces.Rebind }): void {\n    // EXPLORER: Rebind Navigation factory to remove open editors widget\n    rebind(TheiaNavigatorWidgetFactory).to(NavigatorWidgetFactory).inSingletonScope();\n\n    // EXPLORER: Patched files widget\n    bind(WidgetFactory).toDynamicValue(({ container }) => ({\n        id: FILE_NAVIGATOR_ID,\n        createWidget: () => {\n            return createFileTreeContainer(container, {\n                tree: FileNavigatorTree,\n                model: FileNavigatorModel,\n                widget: FileNavigatorWidget,\n                decoratorService: NavigatorDecoratorService,\n                props: FILE_NAVIGATOR_PROPS,\n            }).get(FileNavigatorWidget);\n        },\n    })).inSingletonScope();\n}\n\n/**\n * Remove open editors widget\n */\n@injectable()\nexport class NavigatorWidgetFactory extends TheiaNavigatorWidgetFactory {\n    protected fileNavigatorWidgetOptions: ViewContainer.Factory.WidgetOptions = {\n        order: 0,\n        canHide: false,\n        initiallyCollapsed: false,\n        weight: 120,\n        disableDraggingToOtherContainers: true,\n    };\n\n    override async createWidget(): Promise<ViewContainer> {\n        const viewContainer = this.viewContainerFactory({\n            id: EXPLORER_VIEW_CONTAINER_ID,\n            progressLocationId: 'explorer',\n        });\n\n        viewContainer.setTitleOptions({\n            ...EXPLORER_VIEW_CONTAINER_TITLE_OPTIONS,\n            label: '',\n            closeable: false,\n        });\n\n        const navigatorWidget = await this.widgetManager.getOrCreateWidget(FILE_NAVIGATOR_ID);\n\n        viewContainer.addWidget(navigatorWidget, this.fileNavigatorWidgetOptions);\n\n        // NOTE Removed open editors widget\n        // const openEditorsWidget = await this.widgetManager.getOrCreateWidget(OpenEditorsWidget.ID);\n        // viewContainer.addWidget(openEditorsWidget, this.openEditorsWidgetOptions);\n\n        return viewContainer;\n    }\n}\n\n@injectable()\nexport class FileNavigatorWidget extends TheiaFileNavigatorWidget {\n    protected override doUpdateRows(): void {\n        super.doUpdateRows();\n\n        this.title.label = nls.localizeByDefault('Files');\n    }\n}\n"],"names":["initFileNavigator","bind","rebind","TheiaNavigatorWidgetFactory","NavigatorWidgetFactory","WidgetFactory","container","FILE_NAVIGATOR_ID","createFileTreeContainer","FileNavigatorTree","FileNavigatorModel","FileNavigatorWidget","NavigatorDecoratorService","FILE_NAVIGATOR_PROPS","viewContainer","EXPLORER_VIEW_CONTAINER_ID","EXPLORER_VIEW_CONTAINER_TITLE_OPTIONS","navigatorWidget","__decorateClass","injectable","TheiaFileNavigatorWidget","nls"],"mappings":"qiBASO,SAASA,EAAkB,CAAE,KAAAC,EAAM,OAAAC,GAAsE,CAE5GA,EAAOC,EAAAA,sBAA2B,EAAE,GAAGC,QAAAA,sBAAsB,EAAE,iBAAA,EAG/DH,EAAKI,EAAAA,aAAa,EAAE,eAAe,CAAC,CAAE,UAAAC,MAAiB,CACnD,GAAIC,EAAAA,kBACJ,aAAc,IACHC,EAAAA,wBAAwBF,EAAW,CACtC,KAAMG,EAAAA,kBACN,MAAOC,EAAAA,mBACP,OAAQC,QAAAA,oBACR,iBAAkBC,EAAAA,0BAClB,MAAOC,EAAAA,oBAAA,CACV,EAAE,IAAIF,2BAAmB,CAC9B,EACF,EAAE,iBAAA,CACR,CAMaP,QAAAA,uBAAN,cAAqCD,EAAAA,sBAA4B,CAC1D,2BAAkE,CACxE,MAAO,EACP,QAAS,GACT,mBAAoB,GACpB,OAAQ,IACR,iCAAkC,EAAA,EAGtC,MAAe,cAAuC,CAClD,MAAMW,EAAgB,KAAK,qBAAqB,CAC5C,GAAIC,EAAAA,2BACJ,mBAAoB,UAAA,CACvB,EAEDD,EAAc,gBAAgB,CAC1B,GAAGE,EAAAA,sCACH,MAAO,GACP,UAAW,EAAA,CACd,EAED,MAAMC,EAAkB,MAAM,KAAK,cAAc,kBAAkBV,EAAAA,iBAAiB,EAEpF,OAAAO,EAAc,UAAUG,EAAiB,KAAK,0BAA0B,EAMjEH,CAAA,CAEf,EA/BaV,QAAAA,uBAANc,EAAA,CADNC,EAAAA,WAAA,CAAW,EACCf,8BAAA,EAkCAO,QAAAA,oBAAN,cAAkCS,EAAAA,mBAAyB,CAC3C,cAAqB,CACpC,MAAM,aAAA,EAEN,KAAK,MAAM,MAAQC,EAAAA,IAAI,kBAAkB,OAAO,CAAA,CAExD,EANaV,QAAAA,oBAANO,EAAA,CADNC,EAAAA,WAAA,CAAW,EACCR,2BAAA"}