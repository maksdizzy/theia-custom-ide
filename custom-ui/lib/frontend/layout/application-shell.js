"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require('../style/application-shell.css');;/* empty css                               */const r=require("@theia/core/lib/browser"),m=require("@theia/core/lib/browser/shell/theia-dock-panel"),P=require("@theia/core/shared/@lumino/domutils"),u=require("@theia/core/shared/inversify"),f=require("./frontend-application.js"),d=require("./shell-init-contribution.js"),h=require("./side-panel-handler.js");var y=Object.defineProperty,b=Object.getOwnPropertyDescriptor,g=(l,t,a,n)=>{for(var o=n>1?void 0:n?b(t,a):t,e=l.length-1,i;e>=0;e--)(i=l[e])&&(o=(n?i(t,a,o):i(o))||o);return n&&o&&y(t,a,o),o};function v({bind:l,rebind:t}){t(r.ApplicationShell).to(exports.ApplicationShell).inSingletonScope(),t(r.FrontendApplication).to(f.FrontendApplication).inSingletonScope(),l(d.ShellInitContribution).toSelf().inSingletonScope(),l(r.FrontendApplicationContribution).toService(d.ShellInitContribution),l(h.SidePanelHandler).toSelf(),t(r.SidePanelHandlerFactory).toAutoFactory(h.SidePanelHandler)}exports.ApplicationShell=class extends r.ApplicationShell{init(){this.options={leftPanel:{...this.options.leftPanel,initialSizeRatio:.25},bottomPanel:{...this.options.bottomPanel,emptySize:0,expandDuration:0,initialSizeRatio:.2},rightPanel:{...this.options.rightPanel,emptySize:0,expandThreshold:0,initialSizeRatio:0}},super.init(),this.restrictDragging()}getInsertionOptions(t){return t?.area==="right"&&(t.area="left"),super.getInsertionOptions(t)}handleEvent(t){switch(t.type){case"lm-dragenter":case"lm-dragleave":case"lm-dragover":case"lm-drop":return}return super.handleEvent(t)}restrictDragging(){const t=m.TheiaDockPanel.prototype;if(t._patchedDropBlocker)return;const a=t.handleEvent,n=t._showOverlay,o=t.addWidget;t.handleEvent=function(e){const i=this.node,c=!!i.closest(".theia-side-panel"),p=!!i.closest('[id="theia-bottom-content-panel"]'),s=!e.source,S=e.source?.id==="theia-bottom-content-panel";if(!s&&!(S||p)&&!(c&&["lm-dragenter","lm-dragleave","lm-dragover","lm-drop"].includes(e.type)))return a.call(this,e)},t._showOverlay=function(e,i){const c=n.call(this,e,i),p=this.overlay;if(["widget-top","widget-bottom","root-top","root-bottom","widget-tab"].includes(c)){const s=P.ElementExt.boxSizing(this.node);return p.show({top:s.paddingTop,left:s.paddingLeft,right:s.paddingRight,bottom:s.paddingBottom}),"widget-all"}return c},t.addWidget=function(e,i){return(i?.mode==="split-top"||i?.mode==="split-bottom")&&(i.mode="tab-after"),o.call(this,e,i)},t._patchedDropBlocker=!0}createLayout(){const a=this.createSplitLayout([this.mainPanel,this.bottomPanel],[1,0],{orientation:"vertical",spacing:6}),n=new r.TheiaSplitPanel({layout:a});n.id="theia-bottom-split-panel";const o=this.createSplitLayout([this.leftPanelHandler.container,n,this.rightPanelHandler.container],[0,1,0],{orientation:"horizontal",spacing:6}),e=new r.TheiaSplitPanel({layout:o});return e.id="theia-main-ide-panel",this.createBoxLayout([this.topPanel,e,this.statusBar],[0,1,0],{direction:"top-to-bottom",spacing:0})}};g([u.postConstruct()],exports.ApplicationShell.prototype,"init",1);exports.ApplicationShell=g([u.injectable()],exports.ApplicationShell);exports.initApplicationShell=v;
//# sourceMappingURL=application-shell.js.map
