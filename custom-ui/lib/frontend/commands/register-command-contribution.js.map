{"version":3,"file":"register-command-contribution.js","sources":["../../../src/frontend/commands/register-command-contribution.ts"],"sourcesContent":["import { ApplicationShell as TheiaApplicationShell, CommonCommands, CommonMenus } from '@theia/core/lib/browser';\nimport { Command, CommandContribution, CommandRegistry, MenuContribution, MenuModelRegistry, MessageService, nls } from '@theia/core/lib/common';\nimport { inject, injectable, type interfaces } from '@theia/core/shared/inversify';\nimport { EditorCommands } from '@theia/editor/lib/browser';\nimport { FileNavigatorContribution } from '@theia/navigator/lib/browser/navigator-contribution';\nimport { OutputContribution } from '@theia/output/lib/browser/output-contribution';\nimport { SearchInWorkspaceFrontendContribution } from '@theia/search-in-workspace/lib/browser/search-in-workspace-frontend-contribution';\nimport { TerminalCommands } from '@theia/terminal/lib/browser/terminal-frontend-contribution';\nimport { WorkspaceCommands } from '@theia/workspace/lib/browser';\n\nimport { ApplicationShell } from '../layout/application-shell';\n\nexport const SHOW_EXPLORER_COMMAND = Command.toLocalizedCommand({\n    id: 'fileNavigator:activate',\n    label: 'Files',\n});\n\nexport const SHOW_SEARCH_COMMAND = Command.toLocalizedCommand({\n    id: 'searchInWorkspace:activate',\n    label: 'Search',\n});\n\nexport const TOGGLE_OUTPUT_COMMAND = Command.toLocalizedCommand({\n    id: 'output:toggle',\n    label: 'Toggle Output',\n});\n\n// Register commands\n@injectable()\nexport class FlexbeUiCommandContribution implements CommandContribution {\n    @inject(TheiaApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(MessageService)\n    protected readonly messageService!: MessageService;\n\n    @inject(FileNavigatorContribution)\n    protected readonly fileNavigatorContribution!: FileNavigatorContribution;\n\n    @inject(SearchInWorkspaceFrontendContribution)\n    protected readonly searchInWorkspaceFrontendContribution!: SearchInWorkspaceFrontendContribution;\n\n    @inject(OutputContribution)\n    protected readonly outputContribution!: OutputContribution;\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(SHOW_EXPLORER_COMMAND, {\n            execute: async() => this.fileNavigatorContribution.openView({ activate: true, reveal: true }),\n        });\n\n        commands.registerCommand(SHOW_SEARCH_COMMAND, {\n            execute: async() => this.searchInWorkspaceFrontendContribution.openView({ activate: true, reveal: true }),\n        });\n\n        // commands.registerCommand(TOGGLE_OUTPUT_COMMAND, {\n        // execute: async() => this.outputContribution.openView({ activate: true, reveal: true }),\n        // });\n\n        // No-op for NEW_UNTITLED_FILE_COMMAND to prevent behavior on double click\n        commands.registerCommand(CommonCommands.NEW_UNTITLED_TEXT_FILE, {\n            execute: () => null,\n        });\n    }\n}\n\n\n// Register menus\n@injectable()\nexport class FlexbeUiMenuContribution implements MenuContribution {\n    registerMenus(menus: MenuModelRegistry): void {\n        // Recreate: Menu -> View\n        menus.registerSubmenu(CommonMenus.VIEW, nls.localizeByDefault('View'));\n\n        // Menu -> File -> New file...\n        menus.registerMenuAction(CommonMenus.FILE_NEW_TEXT, {\n            commandId: WorkspaceCommands.NEW_FILE.id,\n            order: 'a',\n        });\n\n        // Menu -> View -> Explorer\n        menus.registerMenuAction(CommonMenus.VIEW_VIEWS, {\n            commandId: SHOW_EXPLORER_COMMAND.id,\n            label: SHOW_EXPLORER_COMMAND.label,\n            order: 'a',\n        });\n\n        // Menu -> View -> Search\n        menus.registerMenuAction(CommonMenus.VIEW_VIEWS, {\n            commandId: SHOW_SEARCH_COMMAND.id,\n            label: SHOW_SEARCH_COMMAND.label,\n            order: 'b',\n        });\n\n        // Menu -> View -> Output\n        menus.registerMenuAction(CommonMenus.VIEW_VIEWS, {\n            commandId: TOGGLE_OUTPUT_COMMAND.id,\n            label: TOGGLE_OUTPUT_COMMAND.label,\n            order: 'c',\n        });\n\n        // Menu -> View -> Terminal\n        menus.registerMenuAction(CommonMenus.VIEW_VIEWS, {\n            commandId: TerminalCommands.TOGGLE_TERMINAL.id,\n            label: TerminalCommands.TOGGLE_TERMINAL.label,\n            order: 'd',\n        });\n\n        // Menu -> View -> Split view\n        menus.registerMenuAction(CommonMenus.VIEW_LAYOUT, {\n            commandId: EditorCommands.SPLIT_EDITOR_HORIZONTAL.id,\n            label: EditorCommands.SPLIT_EDITOR_HORIZONTAL.label,\n        });\n    }\n}\n\nexport function registerCommands({ bind, rebind }: { bind: interfaces.Bind; rebind: interfaces.Rebind }): void {\n    bind(CommandContribution).to(FlexbeUiCommandContribution).inSingletonScope();\n    bind(MenuContribution).to(FlexbeUiMenuContribution).inSingletonScope();\n}\n"],"names":["SHOW_EXPLORER_COMMAND","Command","SHOW_SEARCH_COMMAND","TOGGLE_OUTPUT_COMMAND","FlexbeUiCommandContribution","commands","CommonCommands","__decorateClass","inject","TheiaApplicationShell","MessageService","FileNavigatorContribution","SearchInWorkspaceFrontendContribution","OutputContribution","injectable","FlexbeUiMenuContribution","menus","CommonMenus","nls","WorkspaceCommands","TerminalCommands","EditorCommands","registerCommands","bind","rebind","CommandContribution","MenuContribution"],"mappings":"4vBAYO,MAAMA,EAAwBC,EAAAA,QAAQ,mBAAmB,CAC5D,GAAI,yBACJ,MAAO,OACX,CAAC,EAEYC,EAAsBD,EAAAA,QAAQ,mBAAmB,CAC1D,GAAI,6BACJ,MAAO,QACX,CAAC,EAEYE,EAAwBF,EAAAA,QAAQ,mBAAmB,CAC5D,GAAI,gBACJ,MAAO,eACX,CAAC,EAIYG,QAAAA,4BAAN,KAAiE,CAEjD,MAGA,eAGA,0BAGA,sCAGA,mBAEnB,iBAAiBC,EAAiC,CAC9CA,EAAS,gBAAgBL,EAAuB,CAC5C,QAAS,SAAW,KAAK,0BAA0B,SAAS,CAAE,SAAU,GAAM,OAAQ,EAAA,CAAM,CAAA,CAC/F,EAEDK,EAAS,gBAAgBH,EAAqB,CAC1C,QAAS,SAAW,KAAK,sCAAsC,SAAS,CAAE,SAAU,GAAM,OAAQ,EAAA,CAAM,CAAA,CAC3G,EAODG,EAAS,gBAAgBC,EAAAA,eAAe,uBAAwB,CAC5D,QAAS,IAAM,IAAA,CAClB,CAAA,CAET,EAhCuBC,EAAA,CADlBC,EAAAA,OAAOC,EAAAA,gBAAqB,CAAA,EADpBL,oCAEU,UAAA,QAAA,CAAA,EAGAG,EAAA,CADlBC,EAAAA,OAAOE,EAAAA,cAAc,CAAA,EAJbN,oCAKU,UAAA,iBAAA,CAAA,EAGAG,EAAA,CADlBC,EAAAA,OAAOG,EAAAA,yBAAyB,CAAA,EAPxBP,oCAQU,UAAA,4BAAA,CAAA,EAGAG,EAAA,CADlBC,EAAAA,OAAOI,EAAAA,qCAAqC,CAAA,EAVpCR,oCAWU,UAAA,wCAAA,CAAA,EAGAG,EAAA,CADlBC,EAAAA,OAAOK,EAAAA,kBAAkB,CAAA,EAbjBT,oCAcU,UAAA,qBAAA,CAAA,EAdVA,QAAAA,4BAANG,EAAA,CADNO,EAAAA,WAAA,CAAW,EACCV,mCAAA,EAuCAW,QAAAA,yBAAN,KAA2D,CAC9D,cAAcC,EAAgC,CAE1CA,EAAM,gBAAgBC,cAAY,KAAMC,EAAAA,IAAI,kBAAkB,MAAM,CAAC,EAGrEF,EAAM,mBAAmBC,EAAAA,YAAY,cAAe,CAChD,UAAWE,EAAAA,kBAAkB,SAAS,GACtC,MAAO,GAAA,CACV,EAGDH,EAAM,mBAAmBC,EAAAA,YAAY,WAAY,CAC7C,UAAWjB,EAAsB,GACjC,MAAOA,EAAsB,MAC7B,MAAO,GAAA,CACV,EAGDgB,EAAM,mBAAmBC,EAAAA,YAAY,WAAY,CAC7C,UAAWf,EAAoB,GAC/B,MAAOA,EAAoB,MAC3B,MAAO,GAAA,CACV,EAGDc,EAAM,mBAAmBC,EAAAA,YAAY,WAAY,CAC7C,UAAWd,EAAsB,GACjC,MAAOA,EAAsB,MAC7B,MAAO,GAAA,CACV,EAGDa,EAAM,mBAAmBC,EAAAA,YAAY,WAAY,CAC7C,UAAWG,EAAAA,iBAAiB,gBAAgB,GAC5C,MAAOA,EAAAA,iBAAiB,gBAAgB,MACxC,MAAO,GAAA,CACV,EAGDJ,EAAM,mBAAmBC,EAAAA,YAAY,YAAa,CAC9C,UAAWI,EAAAA,eAAe,wBAAwB,GAClD,MAAOA,EAAAA,eAAe,wBAAwB,KAAA,CACjD,CAAA,CAET,EA7CaN,QAAAA,yBAANR,EAAA,CADNO,EAAAA,WAAA,CAAW,EACCC,gCAAA,EA+CN,SAASO,EAAiB,CAAE,KAAAC,EAAM,OAAAC,GAAsE,CAC3GD,EAAKE,EAAAA,mBAAmB,EAAE,GAAGrB,QAAAA,2BAA2B,EAAE,iBAAA,EAC1DmB,EAAKG,EAAAA,gBAAgB,EAAE,GAAGX,QAAAA,wBAAwB,EAAE,iBAAA,CACxD"}